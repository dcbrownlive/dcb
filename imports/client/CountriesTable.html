<template name="Stats">

  <button class="selStat pure-button {{#if showStat 1}}pure-button-primary{{/if}}" name="1">Countries</button>
  <button class="selStat pure-button {{#if showStat 2}}pure-button-primary{{/if}}" name="2">Songs</button>
  <button class="selStat pure-button {{#if showStat 3}}pure-button-primary{{/if}}" name="3">Active Users</button>

  {{#if showStat 1}}
  <h2>Number of people per country</h2>

  {{#let countries=getCountryCount}}

  <p><strong>{{numPeopleLoc}}</strong> people registered from <strong>{{countries.length}}</strong> </p>
  <table class="pure-table">
    <thead>
      <tr>
        <th>Country</th>
        <th>Percent</th>
        <th>Count</th>
      </tr>
    </thead>
    <tbody>
      {{#each c in countries}}
      {{#if c._id}}
      <tr>
        <td>
          {{FormatCountryName c._id}}
        </td>
        <td>
          {{c.p}} %
        </td>
        <td>
          {{c.t}}
        </td>
      </tr>
      {{/if}}
      {{/each}}

    </tbody>
  </table>

  {{/let}}

  <!--

  <h2>Chart</h2>
  <div>
    <canvas id="countryChart" height="100px"></canvas>
  </div>
-->
  {{/if}}


  {{#if showStat 2}}

  <h2>Currently requested Songs</h2>
  {{#let songs=getSongCount}}
  <!--
  <p><strong>{{numPeopleLoc}}</strong>  people registered from <strong>{{countries.length}}</strong> </p>
-->
  <table class="pure-table">
    <thead>
      <tr>
        <th>Song</th>
        <th>Count</th>
      </tr>
    </thead>
    <tbody>
      {{#each c in songs}}
      {{#if c._id}}
      <tr>
        <td>
          {{c._id}}
        </td>
        <td>
          {{c.t}}
        </td>
      </tr>
      {{/if}}
      {{/each}}

    </tbody>
  </table>

  {{/let}}
  {{/if}}



  {{#if showStat 3}}

  <h2>Last Active Users</h2>
  {{#let ausers=getActiveUsers}}
  {{ausers}}
  <table class="pure-table">
    <thead>
      <tr>
        <th>Timestamp</th>
        <th>User</th>
      </tr>
    </thead>
    <tbody>
      {{#each c in ausers}}
      <tr>
        <td>
          {{c.name}}
        </td>
        <td>
          {{c.ts}}
        </td>
        <td>
          {{c.msg}}
        </td>
      </tr>
      {{/each}}

    </tbody>
  </table>

  {{/let}}
  {{/if}}


</template>